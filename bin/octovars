#!/bin/sh

#usage:
#   ... | octovars [-s]
#
# Parse octovars.

if [[ "$1" == "-h" ]]; then print-file-comments "$0"; exit; fi

output=$(sed 's,#,\n#, g' | \
	egrep '#\{.+\}' | \
	sed -E 's,.*(#\{.+\}).*,\1,')

# print vars without replacer tokens
if [[ "$1" == "-s" ]]; then
	sed -E 's,#\{(.+)\},\1,' <<< "$output"
	exit
fi

# print vars
printf '%s\n' "$output"
